// include xfunction for updateVersion
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath "io.github.lambdaprime:id.xfunction:14.0"
    }
}

plugins {
    id 'com.diffplug.spotless'
}

apply plugin : 'eclipse'

dependencies {
    implementation files('/usr/share/java/opencv.jar')
    implementation "io.github.lambdaprime:id.xfunction:20.0-SNAPSHOT"

    apiElements files('/usr/share/java/opencv.jar')
    apiElements "io.github.lambdaprime:id.xfunction:20.0-SNAPSHOT"
}

jar {
    manifest { 
        attributes 'Automatic-Module-Name': 'id.matcv' 
    }
}

task createRelease(type: Copy) {
    def out = 'release'
    from jar.archiveFile
    into out
}

task cleanRelease(type: Delete) {
    delete "$projectDir/release"
}

assemble.dependsOn createRelease
clean.dependsOn cleanRelease

// run spotless and format code before the build
classes.dependsOn spotlessApply
